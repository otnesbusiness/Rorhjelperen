<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rørhjelp – digital konsultasjon som sparer deg penger</title>
  <meta name="description" content="Bestill digital rørleggerkonsultasjon – video eller bilder holder ofte. Betal etter endt samtale." />
  <style>
    :root{
      --brand:#7cc5eb; --brand-2:#cfefff;
      --text:#0f172a; --muted:#475569; --bg:#f8fafc;
      --card:#fff; --border:#e2e8f0; --ok:#86efac; --warn:#fcd34d;
      --radius:16px; --shadow:0 8px 24px rgba(2,6,23,.06)
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    html{scroll-behavior:smooth}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif;color:var(--text);background:linear-gradient(180deg,#eff6ff,var(--bg))}
    a{color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:20px}

    header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.8);backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .logo{width:40px;height:40px;border-radius:12px;box-shadow:var(--shadow);display:block;background:#fff;padding:2px}
    .menu{display:flex;gap:16px}
    .menu a{color:var(--muted);text-decoration:none;font-size:14px}
    .menu a:hover{color:var(--brand)}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:#0f172a;border:1px solid #bfe7fb;border-radius:14px;padding:12px 16px;font-weight:800;cursor:pointer;text-decoration:none;box-shadow:0 8px 20px rgba(124,197,235,.25)}
    .btn.secondary{background:#e2e8f0;color:#0f172a;box-shadow:none}
    .btn.warn{background:var(--warn);border-color:#fde68a}
    .btn.ok{background:var(--ok);border-color:#bbf7d0}
    .btn.sm{padding:10px 14px;font-size:15px;border-radius:12px}
    .btn:active{transform:translateY(1px)}

    .hero{padding:40px 0}
    .grid-hero{display:grid;grid-template-columns:1.05fr .95fr;gap:28px;align-items:start}
    .badge{display:inline-flex;align-items:center;gap:8px;font-size:13px;background:#e0f2fe;color:#075985;border:1px solid #bae6fd;padding:6px 12px;border-radius:999px}
    h1{font-size:clamp(28px,5vw,46px);line-height:1.1;margin:8px 0 12px}
    .lead{font-size:clamp(16px,2.4vw,19px);color:var(--muted);margin:0 0 12px}

    .hero-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .price{font-weight:900;font-size:34px}
    .cta-stack{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .note{font-size:12px;color:var(--muted);margin-top:8px}

    section{padding:38px 0}
    .section-title{font-size:26px;margin:0 0 10px}
    .muted{color:var(--muted)}
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
    .card h3{margin:0 0 6px;font-size:18px}

    .steps{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .step{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
    .step strong{display:block;margin-bottom:6px}
    .step .muted{display:block}

    .booking-wrap{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:0;overflow:hidden;box-shadow:var(--shadow)}
    .booking-head{padding:16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:12px}
    .booking-body{padding:0}
    details{border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff}
    details+details{margin-top:10px}
    summary{font-weight:700;cursor:pointer}
    footer{border-top:1px solid var(--border);padding:28px 0;color:var(--muted)}
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .pill{font-size:12px;border:1px solid #bbf7d0;background:#f0fdf4;color:#166534;border-radius:999px;padding:6px 10px}
    .save{display:flex;align-items:center;gap:10px;background:#f0fdf4;border:1px solid #bbf7d0;border-radius:12px;padding:12px;box-shadow:var(--shadow)}
    .save strong{color:#166534}

    .cost-box{background:#fff;border:1px solid var(--border);border-radius:12px;padding:14px;box-shadow:var(--shadow);margin-top:14px}
    .cost-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .cost-col{background:#f8fafc;border:1px dashed var(--border);border-radius:10px;padding:10px}
    .cost-col h4{margin:0 0 6px;font-size:14px}
    .cost-caption{font-size:13px;margin:0 0 8px;background:#fff7ed;border:1px solid #fed7aa;color:#92400e;padding:8px 10px;border-radius:10px}

    .kalk-wrap{background:#fff;border:1px solid var(--border);border-radius:12px;padding:14px}
    .kalk-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .kalk-grid label{font-size:13px;color:var(--muted)}
    .kalk-result{margin-top:10px;font-weight:800}
    .notice{margin-top:6px;font-size:12px;color:var(--muted)}

    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .form-grid .full{grid-column:1 / -1}
    .field{display:flex;flex-direction:column;gap:6px}
    .field input,.field select,.field textarea{padding:10px;border:1px solid var(--border);border-radius:10px;font:inherit}

    /* Nye booking-stiler */
    .date-quick{display:flex;gap:8px;flex-wrap:wrap}
    .chip{border:1px solid var(--border);background:#fff;border-radius:999px;padding:8px 12px;cursor:pointer}
    .chip[aria-pressed="true"]{border-color:#93c5fd;background:#eff6ff}

    .slot-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .slot{padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff;cursor:pointer;text-align:center}
    .slot[disabled]{opacity:.4;cursor:not-allowed}
    .slot[aria-pressed="true"]{outline:2px solid #60a5fa;background:#eff6ff}

    .help-row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
    .tz-note{font-size:12px;color:var(--muted)}

    /* Mobil */
    @media (max-width:920px){
      .grid-hero{grid-template-columns:1fr}
      .hero-aside{order:1; margin-top:14px}
      .cards{grid-template-columns:1fr 1fr}
      .steps{grid-template-columns:1fr}
      .cost-grid{grid-template-columns:1fr}
      .form-grid{grid-template-columns:1fr}
      .slot-grid{grid-template-columns:repeat(3,1fr)}
    }
    @media (max-width:560px){ .cards{grid-template-columns:1fr} .menu{display:none} .slot-grid{grid-template-columns:repeat(2,1fr)} }
  </style>
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop stop-color="%237cc5eb"/><stop offset="1" stop-color="%23cfefff"/></linearGradient></defs><rect rx="12" ry="12" width="64" height="64" fill="white"/><circle cx="32" cy="32" r="26" fill="url(%23g)"/><path d="M35 19l-7 9a6 6 0 108 8l9-7-3-3-4 3-3-3 3-4-3-3z" fill="white"/></svg>' />
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <svg class="logo" viewBox="0 0 64 64" role="img" aria-label="Rørhjelp logo">
          <defs>
            <linearGradient id="lg" x1="0" y1="0" x2="1" y2="1"><stop stop-color="#7cc5eb"/><stop offset="1" stop-color="#cfefff"/></linearGradient>
          </defs>
          <rect x="2" y="2" width="60" height="60" rx="12" ry="12" fill="#ffffff"/>
          <circle cx="32" cy="32" r="24" fill="url(#lg)"/>
          <path d="M32 18c-5 6-8 10-8 14a8 8 0 0016 0c0-4-3-8-8-14z" fill="#ffffff" opacity=".95"/>
          <g transform="translate(35 34) rotate(45)">
            <rect x="-10" y="-3" width="20" height="6" rx="3" fill="#ffffff"/>
            <circle cx="-11" cy="0" r="4" fill="#ffffff"/>
            <circle cx="11" cy="0" r="4" fill="#ffffff"/>
          </g>
        </svg>
        <span data-brand>Rørhjelp</span>
      </div>
      <nav class="menu" aria-label="Hovedmeny">
        <a href="#hvordan">Slik fungerer det</a>
        <a href="#hvorfor">Hvorfor digitalt først</a>
        <a href="#priser">Pris</a>
        <a href="#kalkulator">Spar-kalkulator</a>
        <a href="#faq">FAQ</a>
        <a href="#kontakt">Kontakt</a>
      </nav>
      <a class="btn" href="#booking">Bestill nå</a>
    </div>
  </header>

  <!-- Hero + seksjoner forkortet for fokus på booking ... (beholdt over) -->

  <section id="booking">
    <div class="container">
      <h2 class="section-title">Bestill konsultasjon</h2>
      <p class="muted">Velg tidspunkt – dag, kveld eller akutt ved lekkasje. Betaling skjer etterpå. Du oppgir mobil og e‑post, og velger ønsket kontaktplattform: <strong>FaceTime</strong>, <strong>WhatsApp</strong>, <strong>Zoom</strong>, <strong>Microsoft Teams</strong> eller <strong>Google Meet</strong>.</p>

      <div class="cards" style="margin-bottom:16px">
        <div class="card"><h3>Dag • 499 kr</h3><p class="muted">1–30 minutter. 07:00–16:00. Egnet for de fleste.</p><a class="btn" href="#booking" data-action="standard" style="margin-top:8px">Velg dagtid</a></div>
        <div class="card"><h3>Kveld • 599 kr</h3><p class="muted">1–30 minutter. 16:00–21:00.</p><a class="btn ok" href="#booking" data-action="kveld" style="margin-top:8px">Velg kveld</a></div>
        <div class="card"><h3>Akutt • 699 kr</h3><p class="muted">Tlf/video 1–30 minutter. Svar innen én time hvis tilgjengelig.</p><a class="btn warn" href="#booking" data-action="akutt" style="margin-top:8px">Start akutt-time</a></div>
      </div>

      <div class="booking-wrap">
        <div class="booking-head"><strong>Booking</strong><div class="tz-note" id="tzNote" aria-live="polite"></div></div>
        <div class="booking-body" id="calendlyFrame" aria-live="polite">
          <form id="bookingForm" action="https://formsubmit.co/otnesror@gmail.com" method="POST" style="padding:16px">
            <!-- FormSubmit: basic settings -->
            <input type="hidden" name="_subject" value="Ny Rørhjelp-forespørsel" />
            <input type="hidden" name="_captcha" value="false" />
            <input type="hidden" name="_next" id="fsNext" value="#takk" />
            <input type="text" name="_honey" style="display:none">

            <div class="form-grid">
              <label class="field"><span>Navn</span><input name="name" type="text" required placeholder="Ola Nordmann"></label>
              <label class="field"><span>E‑post</span><input name="email" type="email" required placeholder="ola@nordmann.no"></label>
              <label class="field"><span>Mobil</span><input name="mobil" type="tel" required placeholder="+47 4X XX XX XX"></label>

              <fieldset class="field" style="border:0;padding:0;margin:0">
                <span>Type</span>
                <div style="display:flex;gap:10px;flex-wrap:wrap">
                  <label><input type="radio" name="type" value="Dag" required> Dag</label>
                  <label><input type="radio" name="type" value="Kveld"> Kveld</label>
                  <label><input type="radio" name="type" value="Akutt" id="typeAkutt"> Akutt</label>
                </div>
              </fieldset>

              <label class="field"><span>Foretrukket plattform</span>
                <select id="plattform" name="plattform" required>
                  <option value="">Velg</option>
                  <option>FaceTime</option>
                  <option>WhatsApp</option>
                  <option>Zoom</option>
                  <option>Microsoft Teams</option>
                  <option>Google Meet</option>
                </select>
              </label>

              <!-- NY: Kalender + tidsluker -->
              <div class="field">
                <span>Dato</span>
                <div class="date-quick" id="dateQuick" role="group" aria-label="Hurtigvalg dato"></div>
                <input id="dato" name="dato" type="date" required style="margin-top:8px" />
              </div>

              <div class="field">
                <span>Klokkeslett</span>
                <div id="slotWrap" class="slot-grid" role="grid" aria-label="Tilgjengelige tider"></div>
                <input id="tid" name="tid" type="hidden" required />
                <div id="slotHelp" class="notice" aria-live="polite"></div>
              </div>

              <label class="field full"><span>Beskrivelse (valgfritt)</span>
                <textarea name="beskrivelse" rows="3" placeholder="Kort om problemet + legg ved lenker til bilder hvis du har"></textarea>
              </label>
            </div>

            <div id="akuttBox" class="save" style="display:none;margin-top:12px;background:#fff7ed;border-color:#fed7aa">
              <div aria-hidden="true">📞</div>
              <div>
                <strong>Akutt?</strong> Ring oss med en gang: <a id="akuttTel" href="tel:+4740000000">+47 400 00 000</a>.
                Vi svarer så fort vi kan. Send gjerne skjemaet også for oppsummering.
              </div>
            </div>

            <div class="help-row" style="margin-top:8px">
              <p class="notice">Vi sender deg lenke/SMS til valgt plattform før timen starter.</p>
              <button class="btn" type="submit">Send forespørsel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <section id="takk" style="display:none">
    <div class="container">
      <div class="card" style="max-width:620px">
        <h2 class="section-title">Takk for forespørselen!</h2>
        <p class="muted">Vi sender bekreftelse og lenke/SMS til valgt plattform.</p>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">© <span id="y"></span> Rørhjelp. Norskregistrert, autorisert rørlegger.</div>
  </footer>

  <script>
    // --- Pris-spar kalkulator (uendret) ---
    (function(){
      const sel = id => document.getElementById(id);
      const rate = sel('rate'), oppmote = sel('oppmote'),
            timerUten = sel('timerUten'), timerMed = sel('timerMed'),
            videopris = sel('videopris'), res = sel('resultat');
      function fmt(n){ return 'kr ' + Math.max(0, Math.round(n)).toLocaleString('no-NO'); }
      function calc(){
        const r = +rate?.value||0, u = +oppmote?.value||0, tu = +timerUten?.value||0, tm = +timerMed?.value||0, v = +videopris?.value||0;
        const uten = u + (tu * r); const med  = v + (tm * r); const spar = uten - med;
        if(res){ res.textContent = 'Potensiell besparelse: ' + fmt(spar); res.style.color = spar > 0 ? '#166534' : '#7f1d1d'; }
      }
      [rate, oppmote, timerUten, timerMed, videopris].forEach(el=>{ if(el) el.addEventListener('input', calc); });
      calc();
    })();

    // --- Forbedret booking ---
    (function(){
      const $ = (s,root=document)=>root.querySelector(s);
      const $$ = (s,root=document)=>Array.from(root.querySelectorAll(s));

      // Hurtigvalg-datoer (i Oslo-tid)
      const tz = 'Europe/Oslo';
      const today = new Date();
      const fmtISO = d => d.toISOString().slice(0,10);
      const addDays = (d, n) => { const x = new Date(d); x.setDate(x.getDate()+n); return x; };

      // Elementer
      const form = $('#bookingForm');
      const typeRadios = $$('input[name="type"]');
      const dateQuick = $('#dateQuick');
      const dateInput = $('#dato');
      const slotWrap = $('#slotWrap');
      const tidHidden = $('#tid');
      const slotHelp = $('#slotHelp');
      const tzNote = $('#tzNote');

      // Akutt-boks
      const akuttBox = $('#akuttBox');
      const akuttTel = $('#akuttTel');
      const AKUTT_PHONE = '+47 400 00 000';
      if(akuttTel){ akuttTel.textContent = AKUTT_PHONE; akuttTel.href = 'tel:' + AKUTT_PHONE.replace(/\s+/g,''); }

      // Sett min-dato = i dag
      dateInput.min = fmtISO(today);

      // Tidsintervaller per type
      const ranges = {
        Dag:   { start:7, end:16 },
        Kveld: { start:16, end:21 },
        Akutt: { start:7, end:21 }
      };

      function setTzNote(){
        try{
          const fmt = new Intl.DateTimeFormat('no-NO',{ timeZone: tz, timeStyle:'short', dateStyle:'medium' });
          tzNote.textContent = 'Tidene vises i norsk tid ('+ tz +'). Nå: ' + fmt.format(new Date());
        }catch(e){ tzNote.textContent = 'Tidene vises i lokal tid.'; }
      }
      setTzNote();

      // Bygg hurtigvalg-knapper (I dag, I morgen, +2, +3)
      function buildQuickDates(){
        const labels = ['I dag','I morgen','Om 2 dager','Om 3 dager'];
        dateQuick.innerHTML = '';
        labels.forEach((label, i)=>{
          const d = addDays(today, i);
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'chip';
          btn.setAttribute('aria-pressed','false');
          btn.textContent = label + ' (' + d.toLocaleDateString('no-NO',{weekday:'short', day:'2-digit', month:'2-digit'}) + ')';
          btn.dataset.date = fmtISO(d);
          btn.addEventListener('click',()=>{
            $$('.chip', dateQuick).forEach(c=>c.setAttribute('aria-pressed','false'));
            btn.setAttribute('aria-pressed','true');
            dateInput.value = btn.dataset.date;
            buildSlots();
          });
          dateQuick.appendChild(btn);
        });
        // preselect today
        const first = $('.chip', dateQuick); if(first){ first.click(); }
      }

      // Lag 15-min slots, filtrer bort fortid (for valgt dato)
      function buildSlots(){
        const type = $('input[name="type"]:checked')?.value || 'Dag';
        const {start, end} = ranges[type] || ranges.Dag;
        const selectedDate = dateInput.value ? new Date(dateInput.value+'T00:00:00') : today;
        const now = new Date();
        slotWrap.innerHTML = '';
        tidHidden.value = '';
        let count = 0;
        for(let h=start; h<=end; h++){
          for(let m=0; m<60; m+=15){
            if(h===end && m>0) break;
            const hh = String(h).padStart(2,'0');
            const mm = String(m).padStart(2,'0');
            const timeStr = `${hh}:${mm}`;
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'slot';
            btn.textContent = timeStr;
            btn.setAttribute('aria-pressed','false');

            // disable hvis i dag og tidspunkt har passert
            const slotDateTime = new Date(selectedDate);
            slotDateTime.setHours(h, m, 0, 0);
            const isPast = slotDateTime < now;
            const outOfRangeForType = false; // (dekket av range)
            if(isPast) btn.disabled = true;

            btn.addEventListener('click',()=>{
              $$('.slot', slotWrap).forEach(s=>s.setAttribute('aria-pressed','false'));
              btn.setAttribute('aria-pressed','true');
              tidHidden.value = timeStr;
              slotHelp.textContent = `Valgt: ${selectedDate.toLocaleDateString('no-NO',{weekday:'long', day:'2-digit', month:'2-digit'})} kl. ${timeStr}`;
            });

            slotWrap.appendChild(btn);
            count++;
          }
        }
        if(count===0){ slotHelp.textContent = 'Ingen ledige tider for valgt dato og type.'; }
        else{
          // auto-forslag første gyldige
          const firstEnabled = $$('.slot', slotWrap).find(b=>!b.disabled);
          if(firstEnabled){ firstEnabled.click(); }
        }
      }

      // Type-endring påvirker krav + visning
      function onTypeChange(){
        const v = $('input[name="type"]:checked')?.value || 'Dag';
        const isAkutt = v==='Akutt';
        akuttBox.style.display = isAkutt ? 'flex' : 'none';
        dateInput.required = !isAkutt;
        tidHidden.required = !isAkutt;
        $('#dato').parentElement.style.display = isAkutt ? 'none' : '';
        $('#slotWrap').parentElement.style.display = isAkutt ? 'none' : '';
        if(!isAkutt){ buildSlots(); }
        else { tidHidden.value = ''; slotHelp.textContent = 'Vi ringer deg så fort vi kan.'; }
      }

      typeRadios.forEach(r=>r.addEventListener('change', onTypeChange));

      // CTA-knapper setter type og scroller
      function setTypeAndScroll(t){
        const r = $(`input[name="type"][value="${t}"]`);
        if(r){ r.checked = true; r.dispatchEvent(new Event('change')); }
        form.scrollIntoView({behavior:'smooth'});
      }
      $$('[data-action="standard"]').forEach(btn=>btn.addEventListener('click', ()=>setTypeAndScroll('Dag')));
      $$('[data-action="kveld"]').forEach(btn=>btn.addEventListener('click', ()=>setTypeAndScroll('Kveld')));
      $$('[data-action="akutt"]').forEach(btn=>btn.addEventListener('click', ()=>setTypeAndScroll('Akutt')));

      // Bygg UI
      buildQuickDates();
      onTypeChange();

      // form submit -> redirect til #takk
      if(form){
        form.addEventListener('submit', function(){
          const next = document.getElementById('fsNext');
          if(next){ next.value = window.location.href.split('#')[0] + '#takk'; }
        });
      }

      // årstall i footer
      document.getElementById('y').textContent = new Date().getFullYear();
    })();
  </script>
</body>
</html>
